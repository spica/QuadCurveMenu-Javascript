(function(c,a,d){function g(i,h){for(var j in h){i[j]=h[j]}return i}function f(o,m,k,l,s){function p(v,i,x,u,w,t){setTimeout(function(){v.style.opacity=parseFloat(v.style.opacity)+u;v.style.top=(parseFloat(v.style.top)+x/w)+"px";v.style.left=(parseFloat(v.style.left)+i/w)+"px"},t)}function r(t,i){setTimeout(function(){t.style.display="none"},i)}offsetX=m-parseFloat(o.style.left);offsetY=k-parseFloat(o.style.top);var h=100;var j=-(1/h);var q=0;var n=0;if(l<=0){l=5}if(s){o.style.display="block";j=1/h}else{r(o,l+50)}while(n++<h){q+=l/h;p(o,offsetX,offsetY,j,h,q)}}function e(i){var h=this;this.defaults={img:"test.png",startPoint:{"x":0,"y":0},endPoint:{"x":0,"y":0},bindFunc:function(j){console.log(j)},target:""};this.init=function(j){h.attributes=g(this.defaults,j);var k=a.createElement("img");k.style.position="absolute";k.style.display="none";k.style.opacity=0;k.style.cursor="pointer";k.src=h.attributes["img"];k.onclick=function(){h.attributes["bindFunc"](k)};h.itemContainer=k};this.setTargetMenu=function(j){j.appendChild(h.itemContainer)};this.setStartPnt=function(j){h.attributes["startPoint"]=j;h.itemContainer.style.top=h.attributes["startPoint"]["y"]+"px";h.itemContainer.style.left=h.attributes["startPoint"]["x"]+"px"};this.setEndPnt=function(j){h.attributes["endPoint"]=j};this.expand=function(j){f(h.itemContainer,h.attributes["endPoint"]["x"],h.attributes["endPoint"]["y"],j,true)};this.close=function(j){f(h.itemContainer,h.attributes["startPoint"]["x"],h.attributes["startPoint"]["y"],j,false)};this.init(i)}function b(i){var h=this;this.defaults={endRadius:100,startPoint:{x:-1,y:0},expandDuration:300,closeDuration:300,menuWholeAngle:2*Math.PI/3,closeButtonImg:"",closeButtonEndPoint:{x:0,y:0},expanding:false,menuItemOptions:[],menuItems:[]};this.init=function(j){h.attributes=g(this.defaults,j)};this.quadcurve=function(o){this.menuContainer=o;this.menuContainer.onclick=h.setClick;this.menuContainer.style.cursor="pointer";if(h.attributes["startPoint"]["x"]==-1){var k=parseFloat(this.menuContainer.offsetTop)-parseFloat(this.menuContainer.offsetHeight)/2;var l=parseFloat(this.menuContainer.offsetLeft)+parseFloat(this.menuContainer.offsetWidth)/2;var j={"x":l,"y":k};h.attributes["startPoint"]=j}var m=a.createElement("span");m.style.position="absolute";m.style.display="none";m.style.opacity=0;m.style.cursor="pointer";m.onclick=h._close;if(h.attributes["closeButtonImg"]==""){m.innerHTML="x"}else{var n=a.createElement("img");n.src=h.attributes["closeButtonImgSrc"];m.appendChild(n)}h.closeButtonContainer=m;a.body.appendChild(m);h._setMenu()};this._setMenu=function(){var p=h.attributes["startPoint"];var m=p["x"];var l=p["y"];var n=h.attributes.menuItemOptions.length;for(var k=0;k<n;k++){var q=new e(h.attributes.menuItemOptions[k]);q.setTargetMenu(h.menuContainer);q.setStartPnt(p);var r=parseInt(m,10)+h.attributes["endRadius"]*Math.sin(k*h.attributes["menuWholeAngle"]/n);var o=parseInt(l,10)-h.attributes["endRadius"]*Math.cos(k*h.attributes["menuWholeAngle"]/n);var j={x:r,y:o};q.setEndPnt(j);h.attributes.menuItems.push(q)}h.closeButtonContainer.style.top=l+"px";h.closeButtonContainer.style.left=m+"px";h.attributes["closeButtonEndPoint"]["x"]=parseInt(m,10)+1.5*h.attributes["endRadius"]*Math.sin(h.attributes["menuWholeAngle"]/2);h.attributes["closeButtonEndPoint"]["y"]=parseInt(l,10)-1.5*h.attributes["endRadius"]*Math.cos(h.attributes["menuWholeAngle"]/2)};this.isExpanding=function(){return h.attributes["expanding"]};this.setExpanding=function(j){h.attributes["expanding"]=j};this._expand=function(){if(!h.isExpanding()){var l=h.attributes.menuItems.length;for(var j=0;j<l;j++){var k=h.attributes.menuItems[j];k.expand(h.attributes["expandDuration"])}f(h.closeButtonContainer,h.attributes["closeButtonEndPoint"]["x"],h.attributes["closeButtonEndPoint"]["y"],h.attributes["expandDuration"],true);h.setExpanding(true)}};this._close=function(){if(h.isExpanding()){var l=h.attributes.menuItems.length;for(var j=0;j<l;j++){var k=h.attributes.menuItems[j];k.close(h.attributes["closeDuration"])}f(h.closeButtonContainer,h.attributes["startPoint"]["x"],h.attributes["startPoint"]["y"],h.attributes["expandDuration"],false);h.setExpanding(false)}};this.setClick=function(){if(!h.isExpanding()){h._expand()}else{h._close()}};this.init(i)}c.QuadCurveMenuItem=e;c.QuadCurveMenu=b})(window,document);